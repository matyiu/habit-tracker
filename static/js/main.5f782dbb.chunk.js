(window.webpackJsonphabit_tracker=window.webpackJsonphabit_tracker||[]).push([[0],{25:function(e,t,a){e.exports=a(46)},30:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(21),s=a.n(r),o=(a(30),a(2)),c=a(3),l=a(6),d=a(5),u=a(1),h=a(7),p=(a(31),a(11));a(32),a(33);var f=function(e){return i.a.createElement("div",{className:"input-group"+(e.className?" ".concat(e.className):"")},i.a.createElement("span",{className:"input-group__title"},e.title),i.a.createElement("div",{className:"input-group__group"},e.children))};a(34);var m=function(e){return i.a.createElement("div",{className:"select",style:{width:e.width}},i.a.createElement("select",{className:"select__input"+(e.className?" "+e.className:""),onChange:e.onChange,value:e.value},e.children),i.a.createElement("i",{className:"select__icon fas fa-angle-down"}))},y=a(10),b=a(22),g=a.n(b),v=(a(43),a(23));function O(e,t){0===e.offsetHeight&&(e.style.height=0),e.style.display="block",e.style.overflow="hidden";var a=e.offsetHeight>0?0:e.scrollHeight+2*e.clientTop;Object(v.a)({targets:e,height:a+"px",easing:"easeOutCubic",duration:t}).finished.then((function(){e.style.display=0===a?"none":"",e.style.height="",e.style.overflow=""}))}function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(a,!0).forEach((function(t){Object(p.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function D(e,t,a){var n=y.LocaleUtils.formatMonthTitle(e,a);return"".concat(e.getDate()," ").concat(n)}function E(e,t,a){var n=e.match(/^(\d{1,2}) ([A-Za-z]+) (\d{4})$/),i=Number(n[1]),r=n[2],s=Number(n[3]),o=new Date;return o.setHours(0,0,0,0),o.setDate(i),o.setMonth(y.LocaleUtils.getMonths(a).indexOf(r)),o.setFullYear(s),o}var j=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={open:!1,name:"",type:{name:"daily"},startDate:void 0,duration:{type:"day",value:""}},a.habitList=e.storage,a.minHeight="71px",a.overlay=i.a.createRef(),a.toggle=a.toggle.bind(Object(u.a)(a)),a.submit=a.submit.bind(Object(u.a)(a)),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"toggle",value:function(e){this.state.open&&e.target!==this.overlay.current||(O(this.habitFormOptions,300),this.setState({open:!this.state.open}))}},{key:"submit",value:function(){var e=this.state,t={name:e.name,type:e.type,startDate:e.startDate,duration:e.duration},a=this.props,n=a.id,i=a.setId;n?(this.habitList.update(n,t),i(null)):this.habitList.add(t),this.overlay.current.click(),this.clearForm(),this.props.update()}},{key:"clearForm",value:function(){this.setState({name:"",type:{name:"daily"},startDate:"",duration:{type:"day",value:""}})}},{key:"populateState",value:function(){var e=this.props.id,t=this.habitList.get(e),a=t.name,n=t.type,i=t.startDate,r=t.duration;this.setState({name:a,type:n,startDate:i,duration:r})}},{key:"render",value:function(){var e=this;return i.a.createElement("header",{className:"habit-form","data-state":this.state.open?"open":"closed"},i.a.createElement("div",{className:"habit-form__content"},i.a.createElement("input",{type:"text",placeholder:"Add a habit",className:"habit-form__title",onFocus:this.toggle,onChange:function(t){return e.setState({name:t.target.value})},value:this.state.name}),i.a.createElement("div",{className:"habit-form__options",ref:function(t){return e.habitFormOptions=t},style:{display:"none"}},i.a.createElement(f,{title:"Select type of habit",className:"habit-form__type"},i.a.createElement(m,{width:"275px",className:"input-group__input",onChange:function(t){e.setState({type:{name:t.target.value}})},value:this.state.type.name},i.a.createElement("option",{value:"daily"},"Daily"))),i.a.createElement("div",{className:"habit-form__date"},i.a.createElement(f,{title:"Start Date"},i.a.createElement("div",{className:"habit-form__date__container"},i.a.createElement(g.a,{className:"input-group__input",dayPickerProps:{locale:"en"},formatDate:D,parseDate:E,placeholder:"",inputProps:{readOnly:!0},onDayChange:function(t){return e.setState({startDate:t})},value:this.state.startDate}),i.a.createElement("i",{className:"input-group__icon fas fa-calendar"}))),i.a.createElement(f,{title:"Duration"},i.a.createElement(m,{width:"110px",className:"input-group__input",onChange:function(t){return e.setState({duration:_({},e.state.duration,{type:t.target.value})})},value:this.state.duration.type},i.a.createElement("option",{value:"day"},"Days"),i.a.createElement("option",{value:"week"},"Weeks")),i.a.createElement("input",{type:"text",style:{width:"50px"},className:"number",pattern:"[0-9]*",inputMode:"numeric",onChange:function(t){return e.setState({duration:_({},e.state.duration,{value:t.target.value})})},value:this.state.duration.value}))),i.a.createElement("button",{className:"btn btn--white",onClick:this.submit},this.props.id?"Modify Habit":"Create Habit"))),i.a.createElement("div",{className:"overlay",ref:this.overlay,onClick:this.toggle}))}}]),t}(i.a.Component),k=a(24);function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var S=function(){function e(){Object(o.a)(this,e);var t=localStorage.getItem("habit_tracker[habits]");this.habits=JSON.parse(t)||[],this.habits.forEach((function(e){e.startDate=new Date(e.startDate),e.dayStates&&e.dayStates instanceof Array||(e.dayStates=[]),e.dayStates=e.dayStates.map((function(e){var t=e.state;return{date:new Date(e.date),state:t}}))}));var a=localStorage.getItem("habit_tracker[id]");this.id=Number(a)||0}return Object(c.a)(e,[{key:"add",value:function(e){var t=this._newId(),a=e.name,n=e.startDate,i=e.duration,r=e.type;this._newHabitData(),this.habits.push({id:t,name:a,startDate:n,duration:i,type:r,dayStates:[]}),this.save()}},{key:"save",value:function(){localStorage.setItem("habit_tracker[habits]",JSON.stringify(this.habits)),localStorage.setItem("habit_tracker[id]",this.id)}},{key:"_newId",value:function(){return this.id+=1,this.id}},{key:"get",value:function(e){return e?this.habits.filter((function(t){return t.id===e}))[0]:this.habits}},{key:"remove",value:function(e){this._newHabitData(),this.habits=this.habits.filter((function(t){return t.id!==e})),this.save()}},{key:"update",value:function(e,t){var a=this.get(e),n=Object.assign({},a,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(a,!0).forEach((function(t){Object(p.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({id:e},t)),i=this.habits.indexOf(a);this._newHabitData(),this.habits[i]=n,this.save()}},{key:"_newHabitData",value:function(){this.habits=Object(k.a)(this.habits)}}]),e}();a(44);function C(e,t){return(e+7-{sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6}[t])%7}function x(e,t){return e.date.getTime()===t.getTime()}function H(e,t,a){var n=a.startDate,i=a.endDate,r=t.filter((function(e){return"completed"===e.state})),s=[],o={dates:[],before:!1,after:!1};e.forEach((function(t,a){r.find((function(e){return x(e,t)}))?o.dates.push(t):o.dates.length>0&&(s.push(o),o={dates:[],before:!1,after:!1}),a===e.length-1&&o.dates.length>0&&s.push(o)}));var c=s[0];c&&0===C(c.dates[0].getDay(),"monday")&&(c.before=function(e,t,a){var n=new Date(e.getTime());return n.setDate(n.getDate()-1),n.getTime()>=a.getTime()&&Boolean(t.find((function(e){return x(e,n)})))}(c.dates[0],r,n));var l=s[s.length-1];return l&&6===C(l.dates[l.dates.length-1].getDay(),"monday")&&(l.after=function(e,t,a){var n=new Date(e.getTime());return n.setDate(n.getDate()+1),n.getTime()<=a.getTime()&&Boolean(t.find((function(e){return x(e,n)})))}(l.dates[l.dates.length-1],r,i)),s}function M(e){var t=e.completedGroup,a=t.dates,n=t.before,r=t.after,s=e.parent.current.offsetWidth,o=s/7,c=C(a[0].getDay(),"monday")*o,l=19*s/642,d=a.length*o-2*l,u=c+l;n&&(d+=o,u-=o),r&&(d+=o);var h={left:u,width:d};return i.a.createElement("td",{style:h,className:"success-day success-day--calendar"})}var P=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={open:!1,windowSize:{width:null,height:null}},a.habitToggle=a.habitToggle.bind(Object(u.a)(a)),a.setActiveHabit=a.setActiveHabit.bind(Object(u.a)(a)),a.resizeHandler=a.resizeHandler.bind(Object(u.a)(a)),a.today=new Date,a.today.setHours(0,0,0,0),a.calendarBody=i.a.createRef(),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"habitToggle",value:function(){O(this.habitBody,300),this.setState({open:!this.state.open})}},{key:"setActiveHabit",value:function(e,t){this.props.displayDayMenu(e),this.props.setId(this.props.habitOptions.id),this.props.setDay(t)}},{key:"renderCalendar",value:function(){var e=this,t=this.props.habitOptions,a=t.duration,n=t.startDate,r=t.dayStates;this.startDate=n;var s=new Date(n.getTime());s.setHours(0,0,0,0);var o="week"===a.type?Number(a.value):Math.ceil(a.value/7),c="day"===a.type?Number(a.value):7*a.value;this.endDate=new Date(n.getTime()),this.endDate.setDate(Number("day"===a.type?a.value:7*o)+s.getDate()-1),C(s.getDay(),"monday")>0&&c%7===0&&(o+=1);var l=new Date;l.setHours(0,0,0,0);for(var d=[],u=0;u<o;u++){for(var h=[],p=[],f=function(t){var a=void 0,n=void 0,o=void 0,c=void 0;0===u&&C(s.getDay(),"monday")>t||y.DateUtils.isDayAfter(s,e.endDate)?n="":(a=y.DateUtils.isSameDay(l,s)?{boxShadow:"0 -6px 0 #0E9F85 inset"}:{},n=s.getDate(),o=new Date(s.getTime()),s.setDate(s.getDate()+1),p.push(o),c=r.find((function(e){return x(e,o)}))),h.push(i.a.createElement("td",{className:"calendar__cell calendar__cell--day",style:a,key:t+7*u,onClick:n?function(t){e.setActiveHabit(t,o)}:null},c&&"missed"===c.state&&i.a.createElement("i",{className:"failure-day failure-day--calendar fas fa-times"}),n))},m=0;m<7;m++)f(m);var b=H(p,r,{startDate:this.startDate,endDate:this.endDate});d.push(i.a.createElement("tr",{className:"calendar__row",key:u},this.calendarBody.current&&b.map((function(t){return i.a.createElement(M,{key:t.dates[0],completedGroup:t,parent:e.calendarBody})})),h))}return d}},{key:"resizeHandler",value:function(){this.setState({windowSize:{width:window.innerWidth,height:window.innerHeight}})}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.resizeHandler)}},{key:"componentWillUnmount",value:function(){window.addEventListener("resize",this.resizeHandler)}},{key:"render",value:function(){var e=this,t=this.renderCalendar(),a=y.DateUtils.isDayInRange(new Date,{from:this.startDate,to:this.endDate});return i.a.createElement("div",{className:"habit habit--full","data-state":this.state.open?"open":"closed"},i.a.createElement("header",{className:"habit__header",onClick:this.habitToggle},i.a.createElement("span",{className:"habit__title"},i.a.createElement("i",{className:"habit__header__icon fas fa-angle-down"}),this.props.habitOptions.name),i.a.createElement("div",{className:"habit__header__action"},!a||i.a.createElement("button",{className:"btn btn--habit habit__btn-day",onClick:function(t){return e.setActiveHabit(t,e.today)}},(new Date).getDate()),i.a.createElement("button",{className:"btn btn--habit habit__btn-options",onClick:function(t){e.props.displayHabitOptions(t),e.props.setId(e.props.habitOptions.id)}},i.a.createElement("i",{className:"fas fa-ellipsis-v"})))),i.a.createElement("div",{className:"habit__body",ref:function(t){e.habitBody=t}},i.a.createElement("table",{className:"calendar"},i.a.createElement("thead",{className:"calendar__header"},i.a.createElement("tr",{className:"calendar__row calendar__row--header"},i.a.createElement("th",{className:"calendar__cell calendar__cell--header"},"Mon"),i.a.createElement("th",{className:"calendar__cell calendar__cell--header"},"Tue"),i.a.createElement("th",{className:"calendar__cell calendar__cell--header"},"Wed"),i.a.createElement("th",{className:"calendar__cell calendar__cell--header"},"Thu"),i.a.createElement("th",{className:"calendar__cell calendar__cell--header"},"Fri"),i.a.createElement("th",{className:"calendar__cell calendar__cell--header"},"Sat"),i.a.createElement("th",{className:"calendar__cell calendar__cell--header"},"Sun"))),i.a.createElement("tbody",{className:"calendar__body",ref:this.calendarBody},t))))}}]),t}(i.a.Component),T=a(8);a(45);function I(e){var t=e.coords,a=e.className,n=e.setRef,r=Object(T.a)(e,["coords","className","setRef"]),s={position:"absolute",top:t.top,right:t.right,bottom:t.bottom,left:t.left};return i.a.createElement("div",Object.assign({},r,{style:s,className:["dropdown",a].join(" "),ref:n}),r.children)}function R(e){var t=e.text,a=e.className,n=e.icon,r=Object(T.a)(e,["text","className","icon"]);return i.a.createElement("button",Object.assign({},r,{className:["btn btn--no-shadow dropdown__item",a].join(" ")}),n,t)}function F(e){var t=e.id,a=e.storage,n=e.update,r=e.toggleEditor,s=Object(T.a)(e,["id","storage","update","toggleEditor"]);return i.a.createElement(I,s,i.a.createElement(R,{text:"Edit",onClick:function(){r()}}),i.a.createElement(R,{text:"Delete",onClick:function(){a.remove(t),n()}}))}function W(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function B(e){return{date:new Date(e.date.getTime()),state:e.state}}function z(e){var t=e.setRef,a=e.id,n=e.storage,r=e.update,s=e.day,o=Object(T.a)(e,["setRef","id","storage","update","day"]),c=n.get(a);function l(e){var t=c.id,a=c.dayStates,i=Object(T.a)(c,["id","dayStates"]),o=a.map(B),l=o.find((function(e){return x(e,s)}));l||(l={date:s},o.push(l)),l.state=e,n.update(t,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?W(a,!0).forEach((function(t){Object(p.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):W(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({dayStates:o},i)),r()}return i.a.createElement(I,Object.assign({setRef:t},o),i.a.createElement(R,{text:"Completed",icon:i.a.createElement("div",{className:"habit-day__icon success-day success-day--small"}),onClick:function(){l("completed")}}),i.a.createElement(R,{text:"Missed",icon:i.a.createElement("i",{className:"habit-day__icon failure-day failure-day--small fas fa-times"}),onClick:function(){l("missed")}}))}function L(e,t,a){var n={};return"left"===a.x?n.x=t.x-5:"right"===a.x?n.x=t.x-e.offsetWidth+5:n.x=t.x-e.offsetWidth/2,"top"===a.y?n.y=t.y-e.offsetHeight-15:n.y=t.y+15,n.xEnd=n.x+e.offsetWidth,n.yEnd=n.y+e.offsetHeight,n}function A(e,t){var a=function(e){var t=e.getBoundingClientRect();return{x:t.left+window.scrollX+e.offsetWidth/2,y:t.top+window.scrollY+e.offsetHeight/2}}(t),n=function(e,t){return L(e,t,{x:"center",y:"bottom"})}(e,a);return L(e,a,function(e){var t=e.x,a=(e.y,e.xEnd),n=e.yEnd,i={x:"center",y:"bottom"};return t<10?i.x="left":a>window.innerWidth-10&&(i.x="right"),n>window.innerHeight+window.scrollY-10&&(i.y="top"),i}(n))}I.defaultProps={coords:{top:null,right:null,bottom:null,left:null}};var U=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={dropdown:!1,dayMenu:!1,activeCoords:{},activeDay:null},a.dropdownClickOutside=a.dropdownClickOutside.bind(Object(u.a)(a)),a.displayHabitOptions=a.displayHabitOptions.bind(Object(u.a)(a)),a.setDayMenuRef=a.setDayMenuRef.bind(Object(u.a)(a)),a.displayDayMenu=a.displayDayMenu.bind(Object(u.a)(a)),a.setDay=a.setDay.bind(Object(u.a)(a)),a.dayMenu=i.a.createRef(),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("click",this.dropdownClickOutside)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.dropdownClickOutside)}},{key:"dropdownClickOutside",value:function(){this.state.dropdown&&this.setState({dropdown:!1}),this.state.dayMenu&&this.setState({dayMenu:!1})}},{key:"displayHabitOptions",value:function(e){e.stopPropagation(),this.setState({dropdown:!0});var t=e.currentTarget.querySelector("i"),a=t.getBoundingClientRect().left+window.scrollX,n=t.getBoundingClientRect().top+window.scrollY+t.offsetHeight+5,i=window.innerWidth-a-t.offsetWidth;n===this.state.activeCoords.top&&this.state.dropdown?this.setState({dropdown:!1}):this.setState({activeCoords:{top:n,right:i}})}},{key:"displayDayMenu",value:function(e){var t=this;e.stopPropagation();var a=e.currentTarget,n=this.state.dayMenu;this.setState({dayMenu:!0},(function(){var e=A(t.dayMenu,a);n&&t.state.activeCoords.top===e.y&&t.state.activeCoords.left===e.x&&t.setState({dayMenu:!1}),t.setState({activeCoords:{left:e.x,top:e.y}})}))}},{key:"setDayMenuRef",value:function(e){this.dayMenu=e}},{key:"setDay",value:function(e){this.setState({activeDay:e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.storage,n=t.update,r=t.id,s=t.habits,o=t.setId,c=t.toggleEditor;return i.a.createElement("div",{className:"habit-list"},i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"row row--column"},this.state.dropdown&&i.a.createElement(F,{storage:a,update:n,coords:this.state.activeCoords,id:r,toggleEditor:c}),this.state.dayMenu&&i.a.createElement(z,{coords:this.state.activeCoords,setRef:this.setDayMenuRef,storage:a,update:n,id:r,day:this.state.activeDay}),s.map((function(t){return i.a.createElement(P,{key:t.id,habitOptions:t,displayHabitOptions:e.displayHabitOptions,setId:o,displayDayMenu:e.displayDayMenu,setDay:e.setDay})})))))}}]),t}(i.a.Component),J=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).habitStorage=new S,a.state={habits:a.habitStorage.get(),id:null},a.update=a.update.bind(Object(u.a)(a)),a.setId=a.setId.bind(Object(u.a)(a)),a.toggleEditor=a.toggleEditor.bind(Object(u.a)(a)),a.habitFormElement=i.a.createRef(),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"update",value:function(){this.setState({habits:this.habitStorage.get()})}},{key:"setId",value:function(e){this.setState({id:e})}},{key:"toggleEditor",value:function(e){this.habitFormElement.current.toggle(e),this.habitFormElement.current.populateState()}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(j,{storage:this.habitStorage,update:this.update,ref:this.habitFormElement,toggleEditor:this.toggleEditor,id:this.state.id,setId:this.setId}),i.a.createElement(U,{storage:this.habitStorage,update:this.update,id:this.state.id,habits:this.state.habits,setId:this.setId,toggleEditor:this.toggleEditor}))}}]),t}(i.a.Component);s.a.render(i.a.createElement(J,null),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.5f782dbb.chunk.js.map